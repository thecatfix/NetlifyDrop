<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Katana HYG Signals</title>
  <style>
    body {
      margin: 0;
      background: #0b1220;
      color: #ffffff;
      font-family: Arial, sans-serif;
    }
    h1 {
      text-align: center;
      margin: 1.5rem 0;
    }
    .table-card {
      max-width: 1400px;
      margin: 0 auto;
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 10px;
      background: #111827;
      overflow-x: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.95rem;
    }
    thead {
      background: rgba(255,255,255,0.05);
    }
    th, td {
      padding: 0.8rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      text-align: center;
    }
    .priority {
      font-weight: 800;
      font-size: 1.2rem;
      white-space: nowrap;
    }
    .bond-title {
      font-weight: 600;
      font-size: 1rem;
    }
    .bond-sub {
      font-size: 0.8rem;
      color: rgba(255,255,255,0.6);
    }
    .metric {
      font-weight: 600;
    }
    .positive {
      color: #a6e3a1;
    }
    .negative {
      color: #f38ba8;
    }
    .signal {
      font-weight: 700;
      text-transform: uppercase;
    }
    .signal-strong {
      background: linear-gradient(90deg, #a6e3a1, #94e2d5);
      color: #0b1220;
      padding: 0.25rem 0.6rem;
      border-radius: 6px;
      display: inline-block;
    }
    .signal-medium {
      background: rgba(249, 226, 175, 0.2);
      color: #f9e2af;
      padding: 0.25rem 0.6rem;
      border-radius: 6px;
      display: inline-block;
    }
    .signal-weak {
      background: rgba(255, 255, 255, 0.08);
      color: rgba(255,255,255,0.7);
      padding: 0.25rem 0.6rem;
      border-radius: 6px;
      display: inline-block;
    }
    .confidence {
      text-align: center;
      white-space: nowrap;
    }
    .confidence-bar {
      background: rgba(255,255,255,0.1);
      height: 8px;
      border-radius: 4px;
      overflow: hidden;
      margin: 0 auto 0.25rem auto;
      width: 120px;
    }
    .confidence-fill {
      background: #00d4e4;
      height: 100%;
    }
    .confidence-text {
      font-size: 0.8rem;
      color: rgba(255,255,255,0.6);
    }
    .match-indicator {
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <h1>Katana HYG Signals</h1>
  <div class="table-card">
    <table id="signalsTable">
      <thead>
        <tr>
          <th>#</th>
          <th>Buy Bond</th>
          <th>Sell Bond</th>
          <th>Price Diff</th>
          <th>Yield Diff</th>
          <th>Signal</th>
          <th>Confidence</th>
          <th>Matches</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <script>
    // Example data (no ratings or YTM columns; price/yield diffs kept as metrics)
    const signals = [
      {
        priority: 1,
        buy_description: "ARDAGH 5.250% 08/27",
        buy_price: 41.57,
        sell_description: "CLARIOS 8.500% 05/27",
        sell_price: 100.17,
        price_diff: 58.6,
        yield_diff: 47.75,
        signal_strength: "STRONG",
        confidence: 95,
        matchIndicator: "⏱ 🏢"
      },
      {
        priority: 2,
        buy_description: "ARDAGH 5.250% 08/27",
        buy_price: 41.90,
        sell_description: "AG 8.630% 09/27",
        sell_price: 102.52,
        price_diff: 60.62,
        yield_diff: 46.81,
        signal_strength: "STRONG",
        confidence: 90,
        matchIndicator: "⏱"
      }
    ];

    function renderTable(rows){
      const tbody = document.getElementById('tableBody');
      tbody.innerHTML = '';
      rows.forEach(signal => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="priority">${signal.priority}</td>

          <!-- Buy Side -->
          <td class="description">
            <div class="bond-title">${signal.buy_description}</div>
            <div class="bond-sub">Price: $${Number(signal.buy_price).toFixed(2)}</div>
          </td>

          <!-- Sell Side -->
          <td class="description">
            <div class="bond-title">${signal.sell_description}</div>
            <div class="bond-sub">Price: $${Number(signal.sell_price).toFixed(2)}</div>
          </td>

          <!-- Metrics -->
          <td class="metric price-diff ${signal.price_diff >= 0 ? "positive" : "negative"}">
            ${Number(signal.price_diff).toFixed(2)}
          </td>
          <td class="metric yield-diff ${signal.yield_diff >= 0 ? "positive" : "negative"}">
            ${Number(signal.yield_diff).toFixed(2)}%
          </td>
          <td class="signal signal-${String(signal.signal_strength || '').toLowerCase()}">
            ${signal.signal_strength}
          </td>
          <td class="confidence">
            <div class="confidence-bar" aria-label="Confidence">
              <div class="confidence-fill" style="width: ${Number(signal.confidence)}%"></div>
            </div>
            <span class="confidence-text">${Number(signal.confidence).toFixed(0)}%</span>
          </td>
          <td class="match-indicator">${signal.matchIndicator || ""}</td>
        `;
        tbody.appendChild(row);
      });
    }

    renderTable(signals);
  </script>
</body>
</html>
